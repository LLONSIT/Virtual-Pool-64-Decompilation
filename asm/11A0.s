.include "macro.inc"

/* assembler directives */
.set noat      /* allow manual use of $at */
.set noreorder /* don't insert nops after branches */
.set gp=64     /* allow use of 64-bit general purpose registers */

.section .text, "ax"

glabel osCreateThread
/* 11A0 800005A0 27BDFFE8 */  addiu      $sp, $sp, -0x18
/* 11A4 800005A4 AFB00010 */  sw         $s0, 0x10($sp)
/* 11A8 800005A8 00808021 */  addu       $s0, $a0, $zero
/* 11AC 800005AC 00E04821 */  addu       $t1, $a3, $zero
/* 11B0 800005B0 000747C3 */  sra        $t0, $a3, 31
/* 11B4 800005B4 3C048000 */  lui        $a0, %hi(__osCleanupThread)
/* 11B8 800005B8 24841710 */  addiu      $a0, $a0, %lo(__osCleanupThread)
/* 11BC 800005BC 00801821 */  addu       $v1, $a0, $zero
/* 11C0 800005C0 000417C3 */  sra        $v0, $a0, 31
/* 11C4 800005C4 8FA70028 */  lw         $a3, 0x28($sp)
/* 11C8 800005C8 3C040100 */  lui        $a0, (0x1000800 >> 16)
/* 11CC 800005CC 34840800 */  ori        $a0, $a0, (0x1000800 & 0xFFFF)
/* 11D0 800005D0 AFBF0014 */  sw         $ra, 0x14($sp)
/* 11D4 800005D4 AE020100 */  sw         $v0, 0x100($s0)
/* 11D8 800005D8 AE030104 */  sw         $v1, 0x104($s0)
/* 11DC 800005DC 3402FF03 */  ori        $v0, $zero, 0xFF03
/* 11E0 800005E0 AE020118 */  sw         $v0, 0x118($s0)
/* 11E4 800005E4 2402003F */  addiu      $v0, $zero, 0x3F
/* 11E8 800005E8 AE020128 */  sw         $v0, 0x128($s0)
/* 11EC 800005EC 24020001 */  addiu      $v0, $zero, 0x1
/* 11F0 800005F0 AE050014 */  sw         $a1, 0x14($s0)
/* 11F4 800005F4 AE000000 */  sw         $zero, 0x0($s0)
/* 11F8 800005F8 AE000008 */  sw         $zero, 0x8($s0)
/* 11FC 800005FC AE06011C */  sw         $a2, 0x11C($s0)
/* 1200 80000600 AE080038 */  sw         $t0, 0x38($s0)
/* 1204 80000604 AE09003C */  sw         $t1, 0x3C($s0)
/* 1208 80000608 AE04012C */  sw         $a0, 0x12C($s0)
/* 120C 8000060C AE000018 */  sw         $zero, 0x18($s0)
/* 1210 80000610 A6020010 */  sh         $v0, 0x10($s0)
/* 1214 80000614 A6000012 */  sh         $zero, 0x12($s0)
/* 1218 80000618 8FA2002C */  lw         $v0, 0x2C($sp)
/* 121C 8000061C 00E05821 */  addu       $t3, $a3, $zero
/* 1220 80000620 000757C3 */  sra        $t2, $a3, 31
/* 1224 80000624 AE020004 */  sw         $v0, 0x4($s0)
/* 1228 80000628 256BFFF0 */  addiu      $t3, $t3, -0x10
/* 122C 8000062C 2D62FFF0 */  sltiu      $v0, $t3, -0x10
/* 1230 80000630 254AFFFF */  addiu      $t2, $t2, -0x1
/* 1234 80000634 01425021 */  addu       $t2, $t2, $v0
/* 1238 80000638 AE0A00F0 */  sw         $t2, 0xF0($s0)
/* 123C 8000063C 0C0005EC */  jal        func_800017B0
/* 1240 80000640 AE0B00F4 */   sw        $t3, 0xF4($s0)
/* 1244 80000644 3C03800A */  lui        $v1, %hi(D_800A06BC)
/* 1248 80000648 8C6306BC */  lw         $v1, %lo(D_800A06BC)($v1)
/* 124C 8000064C 00402021 */  addu       $a0, $v0, $zero
/* 1250 80000650 3C01800A */  lui        $at, %hi(D_800A06BC)
/* 1254 80000654 AC3006BC */  sw         $s0, %lo(D_800A06BC)($at)
/* 1258 80000658 0C0005F4 */  jal        __osRestoreInt
/* 125C 8000065C AE03000C */   sw        $v1, 0xC($s0)
/* 1260 80000660 8FBF0014 */  lw         $ra, 0x14($sp)
/* 1264 80000664 8FB00010 */  lw         $s0, 0x10($sp)
/* 1268 80000668 03E00008 */  jr         $ra
/* 126C 8000066C 27BD0018 */   addiu     $sp, $sp, 0x18

glabel osInitialize
/* 1270 80000670 27BDFFE0 */  addiu      $sp, $sp, -0x20
/* 1274 80000674 24020001 */  addiu      $v0, $zero, 0x1
/* 1278 80000678 AFBF0018 */  sw         $ra, 0x18($sp)
/* 127C 8000067C AFA00014 */  sw         $zero, 0x14($sp)
/* 1280 80000680 3C01803F */  lui        $at, %hi(D_803F59CC)
/* 1284 80000684 0C0005C8 */  jal        func_80001720
/* 1288 80000688 AC2259CC */   sw        $v0, %lo(D_803F59CC)($at)
/* 128C 8000068C 3C042000 */  lui        $a0, (0x20000000 >> 16)
/* 1290 80000690 0C000640 */  jal        __osSetSR
/* 1294 80000694 00442025 */   or        $a0, $v0, $a0
/* 1298 80000698 3C040100 */  lui        $a0, (0x1000800 >> 16)
/* 129C 8000069C 0C00063C */  jal        __osSetFpcCsr
/* 12A0 800006A0 34840800 */   ori       $a0, $a0, (0x1000800 & 0xFFFF)
/* 12A4 800006A4 3C041FC0 */  lui        $a0, (0x1FC007FC >> 16)
.L800006A8:
/* 12A8 800006A8 348407FC */  ori        $a0, $a0, (0x1FC007FC & 0xFFFF)
/* 12AC 800006AC 0C0002AC */  jal        __osSpRawReadIo
/* 12B0 800006B0 27A50010 */   addiu     $a1, $sp, 0x10
/* 12B4 800006B4 1440FFFC */  bnez       $v0, .L800006A8
/* 12B8 800006B8 3C041FC0 */   lui       $a0, (0x1FC007FC >> 16)
.L800006BC:
/* 12BC 800006BC 8FA50010 */  lw         $a1, 0x10($sp)
/* 12C0 800006C0 3C041FC0 */  lui        $a0, (0x1FC007FC >> 16)
/* 12C4 800006C4 348407FC */  ori        $a0, $a0, (0x1FC007FC & 0xFFFF)
/* 12C8 800006C8 0C0002D0 */  jal        __osSiRawWriteIo
/* 12CC 800006CC 34A50008 */   ori       $a1, $a1, 0x8
/* 12D0 800006D0 1440FFFA */  bnez       $v0, .L800006BC
/* 12D4 800006D4 00000000 */   nop
/* 12D8 800006D8 3C028000 */  lui        $v0, %hi(__osExceptionPreamble)
/* 12DC 800006DC 24420DD0 */  addiu      $v0, $v0, %lo(__osExceptionPreamble)
/* 12E0 800006E0 3C068000 */  lui        $a2, %hi(D_80000000)
/* 12E4 800006E4 8C430000 */  lw         $v1, 0x0($v0)
/* 12E8 800006E8 8C440004 */  lw         $a0, 0x4($v0)
/* 12EC 800006EC 8C450008 */  lw         $a1, 0x8($v0)
/* 12F0 800006F0 ACC30000 */  sw         $v1, %lo(D_80000000)($a2)
/* 12F4 800006F4 ACC40004 */  sw         $a0, %lo(D_80000004)($a2)
/* 12F8 800006F8 ACC50008 */  sw         $a1, %lo(D_80000008)($a2)
/* 12FC 800006FC 8C43000C */  lw         $v1, 0xC($v0)
/* 1300 80000700 ACC3000C */  sw         $v1, %lo(D_8000000C)($a2)
/* 1304 80000704 3C068000 */  lui        $a2, (0x80000080 >> 16)
/* 1308 80000708 34C60080 */  ori        $a2, $a2, (0x80000080 & 0xFFFF)
/* 130C 8000070C 8C430000 */  lw         $v1, 0x0($v0)
/* 1310 80000710 8C440004 */  lw         $a0, 0x4($v0)
/* 1314 80000714 8C450008 */  lw         $a1, 0x8($v0)
/* 1318 80000718 ACC30000 */  sw         $v1, 0x0($a2)
/* 131C 8000071C ACC40004 */  sw         $a0, 0x4($a2)
/* 1320 80000720 ACC50008 */  sw         $a1, 0x8($a2)
/* 1324 80000724 8C43000C */  lw         $v1, 0xC($v0)
/* 1328 80000728 ACC3000C */  sw         $v1, 0xC($a2)
/* 132C 8000072C 3C068000 */  lui        $a2, (0x80000100 >> 16)
/* 1330 80000730 34C60100 */  ori        $a2, $a2, (0x80000100 & 0xFFFF)
/* 1334 80000734 8C430000 */  lw         $v1, 0x0($v0)
/* 1338 80000738 8C440004 */  lw         $a0, 0x4($v0)
/* 133C 8000073C 8C450008 */  lw         $a1, 0x8($v0)
/* 1340 80000740 ACC30000 */  sw         $v1, 0x0($a2)
/* 1344 80000744 ACC40004 */  sw         $a0, 0x4($a2)
/* 1348 80000748 ACC50008 */  sw         $a1, 0x8($a2)
/* 134C 8000074C 8C43000C */  lw         $v1, 0xC($v0)
/* 1350 80000750 ACC3000C */  sw         $v1, 0xC($a2)
/* 1354 80000754 3C068000 */  lui        $a2, (0x80000180 >> 16)
/* 1358 80000758 34C60180 */  ori        $a2, $a2, (0x80000180 & 0xFFFF)
/* 135C 8000075C 8C430000 */  lw         $v1, 0x0($v0)
/* 1360 80000760 8C440004 */  lw         $a0, 0x4($v0)
/* 1364 80000764 8C450008 */  lw         $a1, 0x8($v0)
/* 1368 80000768 ACC30000 */  sw         $v1, 0x0($a2)
/* 136C 8000076C ACC40004 */  sw         $a0, 0x4($a2)
/* 1370 80000770 ACC50008 */  sw         $a1, 0x8($a2)
/* 1374 80000774 8C43000C */  lw         $v1, 0xC($v0)
/* 1378 80000778 ACC3000C */  sw         $v1, 0xC($a2)
/* 137C 8000077C 3C048000 */  lui        $a0, (0x80000000 >> 16)
/* 1380 80000780 0C000644 */  jal        func_80001910
/* 1384 80000784 24050190 */   addiu     $a1, $zero, 0x190
/* 1388 80000788 3C048000 */  lui        $a0, (0x80000000 >> 16)
/* 138C 8000078C 0C0005CC */  jal        func_80001730
/* 1390 80000790 24050190 */   addiu     $a1, $zero, 0x190
/* 1394 80000794 0C000664 */  jal        func_80001990
/* 1398 80000798 00000000 */   nop
/* 139C 8000079C 24040004 */  addiu      $a0, $zero, 0x4
/* 13A0 800007A0 0C0002F0 */  jal        osPiRawReadIo
/* 13A4 800007A4 27A50014 */   addiu     $a1, $sp, 0x14
/* 13A8 800007A8 8FA30014 */  lw         $v1, 0x14($sp)
/* 13AC 800007AC 2402FFF0 */  addiu      $v0, $zero, -0x10
/* 13B0 800007B0 00622024 */  and        $a0, $v1, $v0
/* 13B4 800007B4 10800007 */  beqz       $a0, .L800007D4
/* 13B8 800007B8 AFA40014 */   sw        $a0, 0x14($sp)
/* 13BC 800007BC 00801821 */  addu       $v1, $a0, $zero
/* 13C0 800007C0 00001021 */  addu       $v0, $zero, $zero
/* 13C4 800007C4 3C01800A */  lui        $at, %hi(D_800A0690)
/* 13C8 800007C8 AC220690 */  sw         $v0, %lo(D_800A0690)($at)
/* 13CC 800007CC 3C01800A */  lui        $at, %hi(D_800A0694)
/* 13D0 800007D0 AC230694 */  sw         $v1, %lo(D_800A0694)($at)
.L800007D4:
/* 13D4 800007D4 3C02800A */  lui        $v0, %hi(D_800A0690)
/* 13D8 800007D8 8C420690 */  lw         $v0, %lo(D_800A0690)($v0)
/* 13DC 800007DC 3C03800A */  lui        $v1, %hi(D_800A0694)
/* 13E0 800007E0 8C630694 */  lw         $v1, %lo(D_800A0694)($v1)
/* 13E4 800007E4 00022040 */  sll        $a0, $v0, 1
/* 13E8 800007E8 000337C2 */  srl        $a2, $v1, 31
/* 13EC 800007EC 00862025 */  or         $a0, $a0, $a2
/* 13F0 800007F0 00032840 */  sll        $a1, $v1, 1
/* 13F4 800007F4 00A32821 */  addu       $a1, $a1, $v1
/* 13F8 800007F8 00A3302B */  sltu       $a2, $a1, $v1
/* 13FC 800007FC 00822021 */  addu       $a0, $a0, $v0
/* 1400 80000800 00862021 */  addu       $a0, $a0, $a2
/* 1404 80000804 24060000 */  addiu      $a2, $zero, 0x0
/* 1408 80000808 0C000DA0 */  jal        func_80003680
/* 140C 8000080C 24070004 */   addiu     $a3, $zero, 0x4
/* 1410 80000810 3C048000 */  lui        $a0, %hi(osResetType)
/* 1414 80000814 8C84030C */  lw         $a0, %lo(osResetType)($a0)
/* 1418 80000818 3C01800A */  lui        $at, %hi(D_800A0690)
/* 141C 8000081C AC220690 */  sw         $v0, %lo(D_800A0690)($at)
/* 1420 80000820 3C01800A */  lui        $at, %hi(D_800A0694)
/* 1424 80000824 14800005 */  bnez       $a0, .L8000083C
/* 1428 80000828 AC230694 */   sw        $v1, %lo(D_800A0694)($at)
/* 142C 8000082C 3C048000 */  lui        $a0, %hi(osAppNMIBuffer)
/* 1430 80000830 2484031C */  addiu      $a0, $a0, %lo(osAppNMIBuffer)
/* 1434 80000834 0C00034C */  jal        _bzero
/* 1438 80000838 24050040 */   addiu     $a1, $zero, 0x40
.L8000083C:
/* 143C 8000083C 3C038000 */  lui        $v1, %hi(osTvType)
/* 1440 80000840 8C630300 */  lw         $v1, %lo(osTvType)($v1)
/* 1444 80000844 54600004 */  bnel       $v1, $zero, .L80000858
/* 1448 80000848 24020002 */   addiu     $v0, $zero, 0x2
/* 144C 8000084C 3C0202F5 */  lui        $v0, (0x2F5B2D2 >> 16)
/* 1450 80000850 0800021B */  j          .L8000086C
/* 1454 80000854 3442B2D2 */   ori       $v0, $v0, (0x2F5B2D2 & 0xFFFF)
.L80000858:
/* 1458 80000858 14620003 */  bne        $v1, $v0, .L80000868
/* 145C 8000085C 3C0202E6 */   lui       $v0, (0x2E6D354 >> 16)
/* 1460 80000860 0800021B */  j          .L8000086C
/* 1464 80000864 3442025C */   ori       $v0, $v0, (0x2E6025C & 0xFFFF)
.L80000868:
/* 1468 80000868 3442D354 */  ori        $v0, $v0, (0x2E6D354 & 0xFFFF)
.L8000086C:
/* 146C 8000086C 3C01800A */  lui        $at, %hi(D_800A0698)
/* 1470 80000870 AC220698 */  sw         $v0, %lo(D_800A0698)($at)
/* 1474 80000874 8FBF0018 */  lw         $ra, 0x18($sp)
/* 1478 80000878 03E00008 */  jr         $ra
/* 147C 8000087C 27BD0020 */   addiu     $sp, $sp, 0x20

glabel osSetThreadPri
/* 1480 80000880 27BDFFE0 */  addiu      $sp, $sp, -0x20
/* 1484 80000884 AFB00010 */  sw         $s0, 0x10($sp)
/* 1488 80000888 00808021 */  addu       $s0, $a0, $zero
/* 148C 8000088C AFB10014 */  sw         $s1, 0x14($sp)
/* 1490 80000890 00A08821 */  addu       $s1, $a1, $zero
/* 1494 80000894 AFBF001C */  sw         $ra, 0x1C($sp)
/* 1498 80000898 0C0005EC */  jal        func_800017B0
/* 149C 8000089C AFB20018 */   sw        $s2, 0x18($sp)
/* 14A0 800008A0 16000003 */  bnez       $s0, .L800008B0
/* 14A4 800008A4 00409021 */   addu      $s2, $v0, $zero
/* 14A8 800008A8 3C10800A */  lui        $s0, %hi(D_800A06C0)
/* 14AC 800008AC 8E1006C0 */  lw         $s0, %lo(D_800A06C0)($s0)
.L800008B0:
/* 14B0 800008B0 8E020004 */  lw         $v0, 0x4($s0)
/* 14B4 800008B4 1051001C */  beq        $v0, $s1, .L80000928
/* 14B8 800008B8 00000000 */   nop
/* 14BC 800008BC 3C02800A */  lui        $v0, %hi(D_800A06C0)
/* 14C0 800008C0 8C4206C0 */  lw         $v0, %lo(D_800A06C0)($v0)
/* 14C4 800008C4 1202000B */  beq        $s0, $v0, .L800008F4
/* 14C8 800008C8 AE110004 */   sw        $s1, 0x4($s0)
/* 14CC 800008CC 96030010 */  lhu        $v1, 0x10($s0)
/* 14D0 800008D0 24020001 */  addiu      $v0, $zero, 0x1
/* 14D4 800008D4 10620007 */  beq        $v1, $v0, .L800008F4
/* 14D8 800008D8 00000000 */   nop
/* 14DC 800008DC 8E040008 */  lw         $a0, 0x8($s0)
/* 14E0 800008E0 0C00029C */  jal        func_80000A70
/* 14E4 800008E4 02002821 */   addu      $a1, $s0, $zero
/* 14E8 800008E8 8E040008 */  lw         $a0, 0x8($s0)
/* 14EC 800008EC 0C00054F */  jal        func_8000153C
/* 14F0 800008F0 02002821 */   addu      $a1, $s0, $zero
.L800008F4:
/* 14F4 800008F4 3C04800A */  lui        $a0, %hi(D_800A06C0)
/* 14F8 800008F8 8C8406C0 */  lw         $a0, %lo(D_800A06C0)($a0)
/* 14FC 800008FC 3C02800A */  lui        $v0, %hi(D_800A06B8)
/* 1500 80000900 8C4206B8 */  lw         $v0, %lo(D_800A06B8)($v0)
/* 1504 80000904 8C830004 */  lw         $v1, 0x4($a0)
/* 1508 80000908 8C420004 */  lw         $v0, 0x4($v0)
/* 150C 8000090C 0062182A */  slt        $v1, $v1, $v0
/* 1510 80000910 10600005 */  beqz       $v1, .L80000928
/* 1514 80000914 24020002 */   addiu     $v0, $zero, 0x2
/* 1518 80000918 A4820010 */  sh         $v0, 0x10($a0)
/* 151C 8000091C 3C04800A */  lui        $a0, %hi(D_800A06B8)
/* 1520 80000920 0C00050D */  jal        func_80001434
/* 1524 80000924 248406B8 */   addiu     $a0, $a0, %lo(D_800A06B8)
.L80000928:
/* 1528 80000928 0C0005F4 */  jal        __osRestoreInt
/* 152C 8000092C 02402021 */   addu      $a0, $s2, $zero
/* 1530 80000930 8FBF001C */  lw         $ra, 0x1C($sp)
/* 1534 80000934 8FB20018 */  lw         $s2, 0x18($sp)
/* 1538 80000938 8FB10014 */  lw         $s1, 0x14($sp)
/* 153C 8000093C 8FB00010 */  lw         $s0, 0x10($sp)
/* 1540 80000940 03E00008 */  jr         $ra
/* 1544 80000944 27BD0020 */   addiu     $sp, $sp, 0x20
/* 1548 80000948 00000000 */  nop
/* 154C 8000094C 00000000 */  nop
